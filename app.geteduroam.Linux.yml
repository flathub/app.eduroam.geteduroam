id: app.geteduroam.Linux
runtime: org.gnome.Platform
runtime-version: '48'
sdk: org.gnome.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.golang
command: geteduroam-gui

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --share=network
  - --system-talk-name=org.freedesktop.NetworkManager

build-options:
  env:
    - GOBIN=/app/bin
    - GOROOT=/usr/lib/sdk/golang

modules:
  - name: geteduroam
    buildsystem: simple
    build-commands:
      - $GOROOT/bin/go build -mod=vendor -trimpath -buildmode=pie -o geteduroam-gui ./cmd/geteduroam-gui
      - $GOROOT/bin/go build -mod=vendor -trimpath -buildmode=pie -o geteduroam-cli ./cmd/geteduroam-cli
      - $GOROOT/bin/go build -mod=vendor -trimpath -buildmode=pie -o geteduroam-notifcheck ./cmd/geteduroam-notifcheck
      - install -Dm00755 geteduroam-gui $FLATPAK_DEST/bin/geteduroam-gui
      - install -Dm00755 geteduroam-cli $FLATPAK_DEST/bin/geteduroam-cli
      - install -Dm00755 geteduroam-notifcheck $FLATPAK_DEST/bin/geteduroam-notifcheck
      - cp -r ./cmd/geteduroam-gui/resources/share/ $FLATPAK_DEST/
      - install -Dm00644 cmd/geteduroam-gui/flatpak/app.geteduroam.Linux.metainfo.xml $FLATPAK_DEST/share/metainfo/app.geteduroam.Linux.metainfo.xml
    sources:
      - type: git
        url: https://github.com/PucklaJ/linux-app.git
        commit: 'b901ea4c2b1549eb41a8c5acbfc27374931e19ae'
################# Auto generated by github.com/dennwc/flatpak-go-mod ################
      - dest: vendor
        path: modules.txt
        type: file
      - dest: vendor/github.com/godbus/dbus/v5
        sha256: 03dfa8e71089a6f477310d15c4d3a036d82d028532881b50fee254358e782ad9
        strip-components: 4
        type: archive
        url: https://proxy.golang.org/github.com/godbus/dbus/v5/@v/v5.1.0.zip
      - dest: vendor/github.com/jwijenbergh/eduoauth-go
        sha256: da179ee493de109323b53162bb96e274ba28cd59cd07649e91ace65a9da80cf3
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/github.com/jwijenbergh/eduoauth-go/@v/v1.1.2.zip
      - dest: vendor/github.com/jwijenbergh/puregotk
        sha256: 84fde2da9dfcbee3dc24f5e31fa8a2d07100a87f6f6c801b824b452de567aa24
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/github.com/jwijenbergh/puregotk/@v/v0.0.0-20240827133221-51f7e663a5e9.zip
      - dest: vendor/github.com/youmark/pkcs8
        sha256: cdcf5e96850f9f60bc96ab512e4bd06ee19dd2dbe855260c3589c6c79a1bcfb5
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/github.com/youmark/pkcs8/@v/v0.0.0-20240726163527-a2c0da244d78.zip
      - dest: vendor/golang.org/x/exp
        sha256: 18d5e88d3389cbfb181eb9cc36235349129620bfb6df15b1bfd1d936638cd73b
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/golang.org/x/exp/@v/v0.0.0-20250305212735-054e65f0b394.zip
      - dest: vendor/golang.org/x/sys
        sha256: 55f8255602c7a68419745943298893f0a83d6d6696199cfe6b644054669509f3
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/golang.org/x/sys/@v/v0.31.0.zip
      - dest: vendor/golang.org/x/term
        sha256: 485e455450101eb890764239e2bbb0962e8a0689a1e99fa689b47a69e73d04ed
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/golang.org/x/term/@v/v0.30.0.zip
      - dest: vendor/golang.org/x/text
        sha256: 49043b8f569a76d094e6be46ee983df62ff93be4988f665f39f05da1b28b7102
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/golang.org/x/text/@v/v0.23.0.zip
      - dest: vendor/software.sslmate.com/src/go-pkcs12
        sha256: 3ced9a081e6da4c5910288f24c99df10cfb2e1baec1b5b60327301179896ad00
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/software.sslmate.com/src/go-pkcs12/@v/v0.5.0.zip
      - dest: vendor/github.com/jwijenbergh/purego
        sha256: 2b0fd85e583d2905bd2b22337841426ebca6e60b18fc147f9174dfdb12485042
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/github.com/jwijenbergh/purego/@v/v0.0.0-20241210143217-aeaa0bfe09e0.zip
      - dest: vendor/golang.org/x/crypto
        sha256: 86bb4875b3d2bd173b820d2d81d4ae630508fa65183a44dac2cb915e4f904180
        strip-components: 3
        type: archive
        url: https://proxy.golang.org/golang.org/x/crypto/@v/v0.36.0.zip
################# Auto generated by github.com/dennwc/flatpak-go-mod ################
